<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- Lors du déploiement du projet de bibilothèque de services, le contenu du fichier de configuration doit être ajouté au fichier app.config  
  de l'hôte. System.Configuration ne prend pas en charge les fichiers de configuration des bibliothèques. -->
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="Default" 
               name="ProjetTigli.TigliService">
        <!-- Intranet endpoint (non sécurisé) -->
        <endpoint address="net.tcp://localhost:8082/tigli/intranet" 
                  binding="netTcpBinding"
                  bindingConfiguration="" 
                  name="intranet"
                  contract="ProjetTigli.ITigliService" />
        <!-- Extranet "secured by transport endpoint"-->>
        <endpoint address="https://localhost:8083/tigli/extranet" 
                  binding="wsHttpBinding"
                  bindingConfiguration="WSHttpBinding_ITigliService" 
                  name="extranet"
                  contract="ProjetTigli.ITigliService" />
        <!-- Metadata Exchange Endpoint : ici on utilise un binding http car on considère que les métadonnées ne sont pas des données sensibles.
             Toutefois, on aurait aussi pu utiliser un binding https encore une fois.-->
        <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration=""
          name="mex" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8081/tigli" />
          </baseAddresses>
          </host>
      </service>
    </services>
    <bindings>
      <!-- Les messages SOAP sont chiffrés et signés à l'aide du protocole HTTPS.
           Les clients ne s'authentifie pas mais idéalement le service est authentifié à l'aide d'un certifcat SSL 
           (config. au niveau du port utilisé par le service).-->
      <wsHttpBinding>
        <binding name="WSHttpBinding_ITigliService">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <!-- Pour éviter la divulgation d'informations de métadonnées, 
          définissez les valeurs ci-dessous sur false avant le déploiement -->
          <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True" />
          <!-- Pour recevoir les détails de l'exception dans les erreurs à des fins de débogage, 
          définissez la valeur ci-dessous sur true.  Pour éviter la divulgation d'informations d'exception, 
          définissez-la sur false avant le déploiement -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

</configuration>
